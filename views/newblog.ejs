<%- include('partials/head') %>

<div class="container pb-150 pt-150">
    <h2>Yeni Blog Yazısı Oluştur</h2>
    <form method="POST" action="/courses" id="add-blog-form">
        <div class="form-group">
            <label for="blog-title">Başlık</label>
            <input type="text" class="form-control" id="blog-title" name="title" required>
        </div>
        <div id="blog-content" class="form-group">
            <!-- Image input -->
            <div class="form-group">
                <label for="content-image">Görsel URL</label>
                <input type="url" class="form-control" id="content-image" name="content[]" placeholder="Görsel URL">
                <small class="form-text text-muted">Bir URL girin. Örneğin: http://example.com/image.jpg</small>
            </div>
        </div>
        <div class="form-group">
            <label for="blog-category">Kategoriler</label>
            <select name="category" id="blog-category" class="form-control">
                <% categories.forEach(category => { %>
                    <option value="<%= category._id %>"><%= category.title %></option>
                <% }); %>
            </select>
        </div>
        <input type="hidden" name="role" value="<%= user.role %>">
        <button type="submit" class="btn btn-outline-success mt-4">Kaydet</button>
    </form>
    <div class="mt-4">
        <button class="btn btn-outline-secondary" onclick="addContentBlock('title')">Başlık Ekle</button>
        <button class="btn btn-outline-secondary" onclick="addContentBlock('paragraph')">Paragraf Ekle</button>
    </div>
</div>

<script>
    function addContentBlock(type) {
        const contentDiv = document.getElementById('blog-content');
        let html = '';
        switch (type) {
            case 'title':
                html = `
                    <div class="form-group">
                        <label for="content-title">Başlık</label>
                        <input type="hidden" name="contentType[]" value="title">
                        <input type="text" class="form-control" name="content[]" placeholder="Başlık">
                    </div>
                `;
                break;
            case 'paragraph':
                html = `
                    <div class="form-group">
                        <label for="content-paragraph">Paragraf</label>
                        <input type="hidden" name="contentType[]" value="paragraph">
                        <textarea class="form-control" name="content[]" rows="3" placeholder="Paragraf"></textarea>
                    </div>
                `;
                break;
            case 'image':
                html = `
                    <div class="form-group">
                        <label for="content-image">Görsel URL</label>
                        <input type="hidden" name="contentType[]" value="image">
                        <input type="url" class="form-control" name="content[]" placeholder="Görsel URL">
                        <small class="form-text text-muted">Bir URL girin. Örneğin: http://example.com/image.jpg</small>
                    </div>
                `;
                break;
        }
        contentDiv.insertAdjacentHTML('beforeend', html);
    }
</script>


<%- include('partials/footer') %>

<style>
    .content-title input {
        font-size: 1.5rem; /* Set a larger font size */
        font-weight: bold;  /* Make the title bold */
    }
</style>
